{"openapi":"3.1.0","info":{"title":"Fraud Inference API","version":"0.1.0"},"paths":{"/livez":{"get":{"tags":["Health"],"summary":"Livez","description":"Liveness probe kept for backward compatibility.","operationId":"livez_livez_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/readyz":{"get":{"tags":["Health"],"summary":"Readyz","description":"Readiness probe kept for backward compatibility.","operationId":"readyz_readyz_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/metrics":{"get":{"tags":["Monitoring"],"summary":"Metrics","description":"Expose Prometheus metrics.","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/v1/admin/refresh-models":{"post":{"tags":["Admin"],"summary":"Refresh Models","description":"Reloads all models from the registry, providing a hot-swap.\nReturns a diff of the model versions that were changed.","operationId":"refresh_models_v1_admin_refresh_models_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":{"additionalProperties":{"type":"string"},"type":"object"},"type":"object","title":"Response Refresh Models V1 Admin Refresh Models Post"}}}}}}},"/v1/predict":{"post":{"tags":["Prediction"],"summary":"Predict","description":"Performs inference using one of the loaded fraud detection models.","operationId":"predict_v1_predict_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PredictResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/v1/version":{"get":{"tags":["Health"],"summary":"Version","description":"Returns service version and loaded model information.","operationId":"version_v1_version_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health/live":{"get":{"tags":["Health"],"summary":"Live","description":"Liveness probe.","operationId":"live_api_v1_health_live_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/health/ready":{"get":{"tags":["Health"],"summary":"Ready","description":"Readiness probe.","operationId":"ready_api_v1_health_ready_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BatchPrediction":{"properties":{"predictions":{"items":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"boolean"}]},"type":"array","title":"Predictions"},"scores":{"anyOf":[{"items":{"type":"number"},"type":"array"},{"type":"null"}],"title":"Scores","description":"Per-row scores if available."},"threshold":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Threshold"},"errors":{"anyOf":[{"items":{"anyOf":[{"type":"string"},{"type":"null"}]},"type":"array"},{"type":"null"}],"title":"Errors","description":"Per-row error strings (None if ok), order-preserving."}},"type":"object","required":["predictions"],"title":"BatchPrediction"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PredictRequest":{"properties":{"model":{"type":"string","enum":["lightgbm","xgboost","logreg"],"title":"Model"},"features":{"anyOf":[{"$ref":"#/components/schemas/PredictRow"},{"type":"null"}],"description":"Single-row feature payload."},"instances":{"anyOf":[{"items":{"$ref":"#/components/schemas/PredictRow"},"type":"array"},{"type":"null"}],"title":"Instances","description":"Batch of feature rows; order is preserved."},"threshold":{"anyOf":[{"type":"number","maximum":1.0,"minimum":0.0},{"type":"null"}],"title":"Threshold","description":"Optional decision threshold; defaults to service config."},"request_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Request Id","description":"Client-supplied correlation id; server will generate if absent."}},"type":"object","required":["model"],"title":"PredictRequest","description":"Accept either:\n  - a single object: { \"model\": \"...\", \"features\": {...} }\n  - a batch:          { \"model\": \"...\", \"instances\": [ {...}, {...} ] }\nOptionally accept a threshold and a client-supplied request_id."},"PredictResponse":{"properties":{"meta":{"$ref":"#/components/schemas/PredictionMeta"},"result":{"anyOf":[{"$ref":"#/components/schemas/SinglePrediction"},{"$ref":"#/components/schemas/BatchPrediction"}],"title":"Result"}},"type":"object","required":["meta","result"],"title":"PredictResponse"},"PredictRow":{"properties":{},"additionalProperties":true,"type":"object","title":"PredictRow","description":"A single feature row. Fields are populated dynamically at runtime from\nthe MLflow signature (validator layer), so this serves as a permissive\ncontainer here. We still forbid unknown keys at the *validated* layer."},"PredictionMeta":{"properties":{"model_name":{"type":"string","title":"Model Name"},"model_version":{"type":"string","title":"Model Version"},"model_stage":{"type":"string","title":"Model Stage"},"run_id":{"type":"string","title":"Run Id"},"request_id":{"type":"string","format":"uuid","title":"Request Id"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp","description":"Server-side UTC timestamp."},"latency_ms":{"type":"number","title":"Latency Ms"}},"type":"object","required":["model_name","model_version","model_stage","run_id","latency_ms"],"title":"PredictionMeta"},"SinglePrediction":{"properties":{"prediction":{"anyOf":[{"type":"integer"},{"type":"number"},{"type":"boolean"}],"title":"Prediction"},"score":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Score","description":"Probability/score if available."},"threshold":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Threshold"}},"type":"object","required":["prediction"],"title":"SinglePrediction"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}
